# 要件

## 目的
- zellij から機能を最小化した OSS マルチプレクサ「pudding」を提供する
- 分割・サイズ変更・隣接ペイン交換・状態保存/復元・テンプレート作成に限定する
- ghostty での利用を最優先し、通常の端末でも動作する
- pnpm/bun で配布できる npm パッケージ構成を用意する

## スコープ
### 対象機能
- 画面分割（縦/横）
- サイズ変更（分割線の移動）
- 縦幅が同じで隣接するペインの交換
- 横幅が同じで隣接するペインの交換
- AAミニチュアによるテンプレート作成
- ペイン（bite）に名前と初期コマンドを設定
- 状態保存 / 復元（JSON）
- JSON によるキーバインド設定

### 非対象
- プラグイン機構
- セッション共有
- 複雑なタブ/スタック/浮動レイアウト

## 成功条件
- テンプレート編集が TUI で完結し、JSON に保存できる
- テンプレートを適用して複数コマンドを起動できる
- 分割・サイズ変更・交換操作が動作する
- 状態保存/復元が実用上の再現性を持つ

## 異常系要件
- 保存名・テンプレート名は `[A-Za-z0-9_-]` のみ許可し、長さは 1..=64 とする
- パス区切り文字や `..` を含む名前は拒否する
- JSON 読込時に `bite/spoon` 構造検証（ID重複禁止、ratio 範囲、空コマンド禁止）を行う
- 検証失敗時は処理を中断し、エラーを明示表示する

## CLI 契約
- 設定ファイルが壊れている場合は黙ってデフォルトに戻さず、起動失敗とする
- エラーは `stderr` に出力し、終了コードは非 0 を返す
